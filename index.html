<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="https://lucide.dev/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>云航 CloudNav</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class', // 确保这里是 'class'
        theme: {
          extend: {
            colors: {
              // 您原有的核心颜色定义
              primary: '#3b82f6',   // 光线模式下的主要强调色
              secondary: '#64748b', // 光线模式下的次要颜色
              dark: '#0f172a',      // 深色模式下的主要背景色
              card: '#1e293b',      // 深色模式下的卡片背景色

              // 为 body 标签的默认颜色添加别名，方便管理和理解
              'light-bg': '#f9fafb', // 对应 bg-gray-50
              'light-text': '#1e293b', // 对应 text-slate-900
              'dark-bg': '#0f172a', // 对应 bg-slate-900 (与 'dark' 相同，但语义更清晰)
              'dark-text': '#f8fafc', // 对应 text-slate-50

              // 示例：深色模式下的 primary 和 secondary 颜色，通常会更亮一些
              'dark-primary': '#60a5fa', // 深色模式下 primary 颜色更亮
              'dark-secondary': '#94a3b8', // 深色模式下 secondary 颜色更亮
            }
          }
        }
      }
    </script>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      }
      /* Custom scrollbar for sidebar */
      .scrollbar-hide::-webkit-scrollbar {
          display: none;
      }
      .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
      }
      /* Simple CSS-only tooltip transition */
      .tooltip-custom {
          transition: opacity 0.2s, visibility 0.2s;
          pointer-events: none;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "uuid": "https://aistudiocdn.com/uuid@^13.0.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0",
    "buffer": "https://aistudiocdn.com/buffer@^6.0.3"
  }
}
</script>
<link rel="stylesheet" href="/index.css">

    <!-- *** START: FOUC Prevention Script (防止页面加载时闪烁) *** -->
    <script>
        (function() {
            const storedTheme = localStorage.getItem('theme');
            // 如果 localStorage 中有主题设置，则应用该设置
            // 否则，检查系统偏好设置 (prefers-color-scheme)
            if (storedTheme === 'dark' || (!storedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        })();
    </script>
    <!-- *** END: FOUC Prevention Script *** -->

</head>
<!-- 
    body 的背景和文本颜色现在使用我们自定义的语义化颜色别名。
    默认 (光线模式) 使用 light-bg 和 light-text
    深色模式下使用 dark-bg 和 dark-text
    transition-colors duration-300 让颜色切换更平滑。
-->
<body class="bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text transition-colors duration-300">
    <!-- 模式切换按钮，固定在右上角 -->
    <div class="fixed top-4 right-4 z-50">
        <button id="theme-toggle" 
                class="px-4 py-2 rounded-full 
                       bg-primary text-white font-semibold 
                       hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75
                       dark:bg-dark-primary dark:hover:bg-blue-500 dark:focus:ring-blue-400
                       transition-all duration-300 shadow-lg">
            切换模式
        </button>
    </div>

    <div id="root">
        <!-- 这是一个占位符内容，用于在 React 应用加载前或无 React 内容时展示主题切换效果 -->
        <div class="p-8 text-center bg-white dark:bg-card rounded-lg shadow-md max-w-md mx-auto mt-20">
            <h1 class="text-2xl font-bold text-primary dark:text-dark-primary mb-4">
                云航 CloudNav (React App Placeholder)
            </h1>
            <p class="text-secondary dark:text-dark-secondary">
                这里是您的 React 应用内容。请点击右上角的按钮切换主题。
            </p>
            <p class="mt-4 text-sm text-gray-400 dark:text-gray-600">
                当前模式：<span id="current-mode-display" class="font-medium"></span>
            </p>
        </div>
    </div>

    <!-- 您的 React 应用入口脚本 -->
    <script type="module" src="/index.tsx"></script>

    <!-- *** START: Theme Toggle JavaScript (主题切换逻辑) *** -->
    <script>
        const themeToggleBtn = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement; // 获取 <html> 元素
        const currentModeDisplay = document.getElementById('current-mode-display'); // 获取显示当前模式的元素

        // 根据当前主题更新按钮文本和显示文本
        function updateToggleButtonText() {
            if (htmlElement.classList.contains('dark')) {
                themeToggleBtn.textContent = '切换到光线模式';
                currentModeDisplay.textContent = '深色模式';
                currentModeDisplay.classList.remove('text-primary'); // 移除光线模式颜色
                currentModeDisplay.classList.add('text-dark-primary'); // 添加深色模式颜色
            } else {
                themeToggleBtn.textContent = '切换到深色模式';
                currentModeDisplay.textContent = '光线模式';
                currentModeDisplay.classList.remove('text-dark-primary'); // 移除深色模式颜色
                currentModeDisplay.classList.add('text-primary'); // 添加光线模式颜色
            }
        }

        // 页面加载时立即更新按钮文本和显示文本
        updateToggleButtonText();

        // 为切换按钮添加点击事件监听器
        themeToggleBtn.addEventListener('click', () => {
            if (htmlElement.classList.contains('dark')) {
                // 当前是深色模式，切换到光线模式
                htmlElement.classList.remove('dark');
                localStorage.setItem('theme', 'light'); // 保存偏好设置
            } else {
                // 当前是光线模式，切换到深色模式
                htmlElement.classList.add('dark');
                localStorage.setItem('theme', 'dark'); // 保存偏好设置
            }
            updateToggleButtonText(); // 切换后更新按钮文本和显示文本
        });
    </script>
    <!-- *** END: Theme Toggle JavaScript *** -->
</body>
</html>
