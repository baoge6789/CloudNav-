<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="https://lucide.dev/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>云航 CloudNav</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Tailwind CSS 配置
      tailwind.config = {
        darkMode: 'class', // 确保这里是 'class'
        theme: {
          extend: {
            colors: {
              // --- 使用 CSS 变量作为颜色定义 ---
              // 这些 Tailwind 类将从 HTML 元素上定义的 CSS 变量获取实际颜色值
              // bg-default 和 text-default 现在将直接映射到 body 的颜色，以便组件可以继承
              'bg-default': 'var(--color-bg-body)', // 页面整体背景
              'text-default': 'var(--color-text-body)', // 页面整体文本颜色
              'primary': 'var(--color-primary)',
              'secondary': 'var(--color-secondary)',
              'border-default': 'var(--color-border-default)',
              'accent': 'var(--color-accent)',
              'card-bg': 'var(--color-card-bg)', // 用于卡片和面板背景
              
              // 固定的语义化颜色 (不随主题变化，除非你为它们也定义了变量)
              success: '#48bb78', 
              warning: '#ecc94b', 
              danger: '#f56565',  
              info: '#4299e1',
            }
          }
        }
      }
    </script>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        /* *** 关键改动：body 的背景和文本颜色现在完全由 CSS 变量控制 *** */
        background-color: var(--color-bg-body);
        color: var(--color-text-body);
        transition: background-color 0.3s, color 0.3s; /* 添加平滑过渡 */
      }
      /* Custom scrollbar for sidebar */
      .scrollbar-hide::-webkit-scrollbar {
          display: none;
      }
      .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
      }
      /* Simple CSS-only tooltip transition */
      .tooltip-custom {
          transition: opacity 0.2s, visibility 0.2s;
          pointer-events: none;
      }

      /* --- CSS 变量定义：根据不同的主题类切换颜色 --- */

      /* 默认 HTML 样式 (作为 light-theme-default 的基础) */
      html {
        /* 页面整体背景和文本颜色 */
        --color-bg-body: #f9fafb; /* 对应 bg-gray-50 */
        --color-text-body: #1e293b; /* 对应 text-slate-900 */
        
        /* 默认光线模式的组件颜色 */
        --color-primary: #3b82f6; /* blue-500 */
        --color-secondary: #64748b; /* slate-600 */
        --color-border-default: #e2e8f0; /* slate-200 */
        --color-accent: #f6ad55; /* orange-400 */
        --color-card-bg: #ffffff; /* white */
      }

      /* 深色模式：覆盖所有颜色变量 */
      html.dark {
        --color-bg-body: #0f172a; /* 对应 dark:bg-slate-900 */
        --color-text-body: #f8fafc; /* 对应 dark:text-slate-50 */
        --color-primary: #60a5fa; /* blue-400 */
        --color-secondary: #94a3b8; /* slate-400 */
        --color-border-default: #475569; /* slate-700 */
        --color-accent: #fbd38d; /* yellow-200 */
        --color-card-bg: #1e293b; /* slate-800 */
      }

      /* 光线模式 1: 默认 (light-theme-default) - 显式定义，与 html 默认值相同 */
      html.light-theme-default {
        --color-bg-body: #f9fafb;
        --color-text-body: #1e293b;
        --color-primary: #3b82f6;
        --color-secondary: #64748b;
        --color-border-default: #e2e8f0;
        --color-accent: #f6ad55;
        --color-card-bg: #ffffff;
      }

      /* 光线模式 2: 暖色调 (Warm Light) */
      html.light-theme-warm {
        --color-bg-body: #fffbeb; /* 浅米色 */
        --color-text-body: #4a2d0b; /* 深棕色 */
        --color-primary: #d97706; /* orange-700 */
        --color-secondary: #78350f; /* amber-900 */
        --color-border-default: #fde68a; /* amber-200 */
        --color-accent: #fcd34d; /* amber-300 */
        --color-card-bg: #fef3c7; /* amber-100 */
      }

      /* 光线模式 3: 冷色调 (Cool Light) */
      html.light-theme-cool {
        --color-bg-body: #f0f9ff; /* 浅蓝色 */
        --color-text-body: #0c4a6e; /* 深蓝色 */
        --color-primary: #0ea5e9; /* sky-500 */
        --color-secondary: #38bdf8; /* sky-400 */
        --color-border-default: #bae6fd; /* sky-200 */
        --color-accent: #7dd3fc; /* sky-300 */
        --color-card-bg: #e0f2fe; /* sky-100 */
      }

      /* 光线模式 4: 极简 (Minimal Light) */
      html.light-theme-minimal {
        --color-bg-body: #ffffff; /* 纯白 */
        --color-text-body: #374151; /* 灰黑色 */
        --color-primary: #10b981; /* emerald-500 */
        --color-secondary: #6b7280; /* gray-500 */
        --color-border-default: #d1d5db; /* gray-300 */
        --color-accent: #34d399; /* emerald-400 */
        --color-card-bg: #f9fafb; /* gray-50 */
      }

      /* 光线模式 5: 柔和 (Soft Pastel) */
      html.light-theme-soft {
        --color-bg-body: #fff0f5; /* 浅粉色 */
        --color-text-body: #831843; /* 深粉色 */
        --color-primary: #f472b6; /* pink-400 */
        --color-secondary: #f9a8d4; /* pink-300 */
        --color-border-default: #fbcfe8; /* pink-200 */
        --color-accent: #fda4af; /* rose-300 */
        --color-card-bg: #ffe4e6; /* rose-100 */
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "uuid": "https://aistudiocdn.com/uuid@^13.0.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0",
    "buffer": "https://aistudiocdn.com/buffer@^6.0.3"
  }
}
</script>
<link rel="stylesheet" href="/index.css">

    <!-- *** START: FOUC Prevention Script (防止页面加载时闪烁) *** -->
    <script>
        (function() {
            // 定义所有主题，包括深色和所有光线模式。
            // 这里的定义必须与 App.tsx 中的保持一致。
            const allThemes = [
                { class: 'light-theme-default', name: '默认光线模式', isDark: false },
                { class: 'light-theme-warm', name: '暖色光线模式', isDark: false },
                { class: 'light-theme-cool', name: '冷色光线模式', isDark: false },
                { class: 'light-theme-minimal', name: '极简光线模式', isDark: false },
                { class: 'light-theme-soft', name: '柔和光线模式', isDark: false },
                { class: 'dark', name: '深色模式', isDark: true },
            ];
            
            let initialThemeClass = allThemes[0].class; // 默认第一个光线主题

            // 尝试从 localStorage 读取主题
            const storedTheme = localStorage.getItem('theme');
            if (storedTheme) {
                const foundTheme = allThemes.find(theme => theme.class === storedTheme);
                if (foundTheme) {
                    initialThemeClass = storedTheme;
                } else {
                    // 如果存储的主题不在列表中，则回退到默认，并清除无效存储
                    localStorage.removeItem('theme');
                }
            } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                // 如果 localStorage 中没有，且系统偏好深色，则设置为深色
                initialThemeClass = 'dark'; 
            }

            // 移除所有可能的主题类，然后添加初始主题类
            allThemes.forEach(theme => document.documentElement.classList.remove(theme.class));
            document.documentElement.classList.add(initialThemeClass);
        })();
    </script>
    <!-- *** END: FOUC Prevention Script *** -->

</head>
<!-- 
    *** 关键改动：body 标签上不再有 Tailwind 颜色类 ***
    body 的背景和文本颜色现在完全由 `<html>` 上的主题类所定义的 CSS 变量控制。
-->
<body>
    <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>
